# 四化箭頭功能說明

## 功能描述

當您點擊紫微斗數盤面上的任何天干時，系統會自動繪製四個不同顏色的箭頭，分別指向四化（祿、權、科、忌）的目標宮位。

## 箭頭顏色對應

- **紅色箭頭** (祿) - #d32f2f
- **綠色箭頭** (權) - #388e3c  
- **藍色箭頭** (科) - #1976d2
- **紫色箭頭** (忌) - #7b1fa2

## 使用方法

1. 打開紫微斗數排盤系統
2. 點擊任意宮位的天干（紅色帶下劃線的文字，如：甲、乙、丙等）
3. 系統會自動：
   - 在右側面板顯示該宮位的四化飛伏分析
   - 在盤面上繪製四條不同顏色的箭頭，指向各自的目標宮位
4. 再次點擊同一天干可以取消選擇並清除箭頭

## 技術實現

### CSS 樣式
- 箭頭容器使用絕對定位，覆蓋整個chart-grid
- 每種四化類型有獨立的箭頭樣式類
- 使用SVG marker定義箭頭頭部

### JavaScript 邏輯
- `drawTransformationArrows(sourceBranch)` 函數負責繪製箭頭
- 計算源宮位和目標宮位的中心點座標
- 使用二次貝塞爾曲線繪製弧形箭頭
- 箭頭之間有偏移量，避免重疊

### 箭頭特性
- 使用虛線樣式 (stroke-dasharray: '5,3')
- 箭頭長度縮短至85%，避免與宮位邊框重疊
- 弧形路徑使曲率為0.2，使箭頭更加美觀
- 多個箭頭會自動分散，避免重疊

## 文件修改

1. **style.css** - 添加箭頭相關樣式
2. **app.js** - 添加箭頭繪製邏輯
   - 新增 `drawTransformationArrows()` 函數
   - 在 `render()` 函數中調用箭頭繪製
   - 添加箭頭容器到HTML結構中
